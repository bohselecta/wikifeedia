<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wikifeedia - Generated Feed</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: #0a0a0a;
            color: #e5e5e5;
        }
    </style>
</head>
<body class="font-sans antialiased">
    <header class="bg-zinc-900 shadow-lg sticky top-0 z-50 border-b border-zinc-800">
        <div class="max-w-4xl mx-auto px-4 py-4">
            <h1 class="text-3xl font-bold text-white">
                ðŸ“š Wikifeedia
            </h1>
            <p class="text-zinc-400 text-sm">
                AI-Curated Wikipedia Posts (Generated)
            </p>
        </div>
    </header>
    
    <main class="max-w-4xl mx-auto px-4 py-6">
        <div class="mb-6 bg-green-900 border border-green-600 rounded-lg p-4">
            <p class="text-green-200">âœ… Showing AI-generated posts from test run</p>
        </div>
        
        <div id="posts-container" class="space-y-4"></div>
    </main>

    <script>
        // Map to actual Wikipedia image URLs
        const imageMap = {
            "Octopus_in_natural_habitat.jpg": "https://upload.wikimedia.org/wikipedia/commons/thumb/3/33/Octopus_in_natural_habitat.jpg/800px-Octopus_in_natural_habitat.jpg",
            "Marie_Curie-c1920.jpg": "https://upload.wikimedia.org/wikipedia/commons/thumb/8/85/Marie_Curie-c1920.jpg/800px-Marie_Curie-c1920.jpg",
            "Cat_August_2010-4.jpg": "https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Cat_August_2010-4.jpg/800px-Cat_August_2010-4.jpg",
            "Longyearbyen_2007-07.jpg": "https://upload.wikimedia.org/wikipedia/commons/thumb/4/4d/Longyearbyen_2007-07.jpg/800px-Longyearbyen_2007-07.jpg",
            "Pantheon_Rome_Italy.jpg": "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d8/Pantheon_Rome_Italy.jpg/800px-Pantheon_Rome_Italy.jpg"
        };
        
        function getPostImage(post) {
            if (post.images && post.images.length > 0) {
                const filename = post.images[0];
                return imageMap[filename] || null;
            }
            return null;
        }
        
        // Load generated posts
        fetch('test_posts.json')
            .then(response => response.json())
            .then(posts => {
                const container = document.getElementById('posts-container');
                
                container.innerHTML = posts.map(post => `
                    <div class="bg-zinc-900 rounded-lg shadow-lg hover:shadow-xl transition-shadow border border-zinc-800 p-6">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="px-3 py-1 rounded-full text-xs font-semibold text-white bg-purple-600">
                                ${post.category}
                            </span>
                            <span class="text-xs text-zinc-500">Quality: ${post.quality_score}/10</span>
                        </div>
                        
                        ${(() => {
                            const imgUrl = getPostImage(post);
                            return imgUrl ? `
                                <div class="mb-4 rounded-lg overflow-hidden bg-zinc-800 flex items-center justify-center">
                                    <img src="${imgUrl}" 
                                         alt="${post.title}" 
                                         class="max-w-full max-h-64 object-contain" 
                                         loading="lazy"
                                         onerror="this.style.display='none'" />
                                </div>
                            ` : '';
                        })()}
                        
                        <h2 class="text-2xl font-bold text-white mb-3">
                            ${post.title}
                        </h2>
                        
                        <p class="text-zinc-400 italic mb-4 border-l-4 border-blue-600 pl-3 py-2">
                            ${post.tldr}
                        </p>
                        
                        <div class="text-zinc-300 mb-4 whitespace-pre-wrap">
                            ${post.content}
                        </div>
                        
                        <div class="flex flex-wrap gap-2 mb-4">
                            ${post.tags.map(tag => `
                                <span class="bg-zinc-800 px-3 py-1 rounded text-xs text-zinc-300">${tag}</span>
                            `).join('')}
                        </div>
                        
                        <div class="text-sm text-zinc-400 border-t border-zinc-800 pt-4">
                            <div class="mb-2"><strong>Source:</strong> ${post.source_title}</div>
                        </div>
                    </div>
                `).join('');
            })
            .catch(error => {
                document.getElementById('posts-container').innerHTML = 
                    '<div class="text-red-400">Error loading posts. Make sure test_posts.json exists.</div>';
                console.error(error);
            });
    </script>
</body>
</html>

